<app-header />

<section class="container mt-3 mb-3">
  <mat-card>
    <mat-card-header>
      <mat-card-title-group>
        <mat-card-subtitle>My collections</mat-card-subtitle>
        <mat-card-title *ngIf="!collections.length">No collection yet. Create it!</mat-card-title>
        <div class="">
          <button mat-raised-button color="warn" (click)="create()">Create new collection</button>
        </div>
      </mat-card-title-group>
    </mat-card-header>
    <mat-card-content class="mt-3">
      <app-collection-form *ngIf="createMode" class="mb-3 d-block" />
      <mat-accordion class="justify-content-between">
        <mat-expansion-panel
          *ngFor="let item of collections; let i = index"
          [expanded]="collectionInx === i"
          [disabled]="createMode"
          (opened)="setStep(i)"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> {{ item.name }} ({{ item.symbol }})</mat-panel-title>
            <mat-panel-description class="justify-content-end gap-1">
              <span>{{ item.description }}</span>
              <mat-icon>info_outline</mat-icon>
            </mat-panel-description>
          </mat-expansion-panel-header>
          <ng-template matExpansionPanelContent>
            <div class="">
              <p class="fs-6 mb-2">
                Name:
                <span class="text-light text-opacity-50">
                  {{ item.name }} ({{ item.symbol }})
                </span>
              </p>
              <p class="fs-6 mb-2">
                Contract:
                <span class="text-light text-opacity-50">{{ item.contractAddress }}</span>
              </p>
              <p class="fs-6 mb-2">
                Price:
                <span class="text-light text-opacity-50"
                  >{{ item.mintPrice }} {{ item.mintCurrency }}</span
                >
              </p>
              <p class="fs-6 mb-2">
                Minted:
                <span class="text-light text-opacity-50">{{ item.mintedItems }}</span>
              </p>
              <p class="fs-6 mb-2">
                Total amount:
                <span class="text-light text-opacity-50">{{ item.totalAmount }}</span>
              </p>
              <p class="fs-6 mb-2">
                Remaining:
                <span class="text-light text-opacity-50">{{ remaining }}</span>
              </p>
              <p class="fs-6 mb-2">
                Sold amount:
                <span class="text-light text-opacity-50">
                  {{ item.soldAmount }} {{ item.mintCurrency }}
                </span>
              </p>
              <p class="fs-6 mb-2">
                Unclaimed amount:
                <span class="text-light text-opacity-50">
                  {{ item.unclaimedAmount }} {{ item.mintCurrency }}
                </span>
              </p>
            </div>
            <mat-divider class="mt-3 mb-3" />
            <div class="d-flex justify-content-end gap-3 align-items-center">
              <span *ngIf="disableClaim">
                Claimable amount less than {{ MIN_CLAIMABLE_AMOUNT }} {{ item.mintCurrency }}
              </span>
              <button mat-raised-button color="accent" [disabled]="disableClaim">Claim</button>
              <button mat-raised-button color="warn">Edit</button>
            </div>
          </ng-template>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
  </mat-card>
</section>
